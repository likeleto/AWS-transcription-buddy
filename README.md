# Я.Транскрипт

Инструмент для удобной работы с транскриптами speech-to-text Яндекс Облака.
Основан на https://github.com/samFredLumley/aws-transcription-editor от https://github.com/samFredLumley
Поставляется как есть, без каких либо гарантий. Я.Транскрипт не связан с компанией Яндекс.

Демо: https://ya-transcript.ulitin.ru

## Зачем все это?

Ручное распознавание дает возможность познакомиться ближе с материалом записи, но занимает значительное время. Автоматическое распознавание быстрее и дешевле, но оно не идеально, к тому же происходит потеря информации, так как получившийся текст не связан с аудио.

Я.Транскрипт связывает преимущества ручного и автоматического распознавания. Позволяет быстро находить нужные места и прослушивать фрагменты точечно, редактировать транскрипт, а так же размечать фрагменты тегами.

Подобные редакторы есть в сервисах вроде сониксэйай, но стоимость распознования в них в разы выше.

## Почему Яндекс Облако

*  Лучшее распознавание русского языка по отношению к конкурентам
*  Более низкая цена относительно сервисов от Гугл и Амазон

## Функции

*  Связь текста и аудио
*  Автоскролл
*  Автосохранение в хранилище браузера
*  Анотирование выделенного текста

## Схема работы

Распознать аудио файлы через Яндекс Облако не так просто, так как в первую очередь это API. Поэтому придется повозиться, для начала сконвертировать аудио в формат opus. Потом загрузить в хранилище на Яндекс Облаке. Настроить сервисные аккаунты и ключи доступа. Запустить распознавание, с помощью curl команды, и забрать результат распознавания через несколько минут. В общем, смысл заморачиваться есть, но только, если у вас много аудиофайлов и они длинные. Сервисы Яндекса не бесплатны, на данный момент 1 час распознования стоит 36 рублей.

## Начало работы

### Предустановки

1. Заведите аккаунт [Яндекс Облако](https://cloud.yandex.ru/)
2. В ObjectStorage создайте "бакет", например, audio. Заведите сервисный аккаунт и получите для него api-ключ. Подробнее в [руководстве пользователя](https://cloud.yandex.ru/docs/speechkit/stt/transcribation#before-you-begin)
3. (Опция) Если вы хотите запустить Я.Транскрипт локально, то установите [http-server](https://www.npmjs.com/package/http-server)* или используйте другой веб-сервер.

http-server требует [node](https://nodejs.org/en/).

### Распознавание аудио в текст

#### Сконвертируйте аудио в OPUS в моно
Используйте любой доступный конвертор.
Мне например нравится FFMpeg, который я запускаю из терминала. [Как установить FFMpeg](www.youtube.com/results?search_query=How+to+Install+FFMPEG)https://
```
ffmpeg -i demo.m4a -ac 1 demo.opus
```
Можно использовать конвертор, который работает в браузере https://lottatools.com/convert-to-opus (но он проигрывает в производительности).

#### Загрузите аудио в ваш бакет на Яндекс Облаке
1. Зайдите в веб-консоль Яндекс Облака
2. Откройте Object Storage, найдите бакет audio
3. Загрузите туда аудио файлы в формате opus и скопируйте ссылки

#### Запустите распознавание и получите результат
Что бы вы окончательно не умерли от консольного ужаса, я сделал интерактивный  python блокнот, через который вы сможете запускать распознавание и получать результат.
1. Зайдите на https://colab.research.google.com/drive/1ZZcawG7YoxdmEC6pRmX0eAGMr04hb3lG?usp=sharing вам потребуется гугл аккаунт
2. Сделайте копию на свой гугл-диск
2. В первом блоке введите api-ключ, имя бакета и имя файла (поддерживается только в формате opus) и запустите блок
3. Запустите второй блок
4. Через некоторое время (1минута распознается примерно за 10 секунд), запустите 3й блок
5. В списке файлов слева (нужно открыть его нажав на иконку) найдите файл имя_аудио.json и скачайте его
6. Удалите файл из бакета, что бы не платить за его хранение

#### Работайте в Я.Транскрипте
1. Откройте https://ya-transcript.ulitin.ru
2. Загрузите аудио и json к нему
3. Вы должны увидеть расшифровку
Подробнее о функциях смотрите в справке редактора

### Запустить Я.Транскрипт локально

1. Клонируйте репозиторий:
```
git clone https://github.com/likeleto/ya-transcript
cd ya-transcript
```
2. Запустите сервер
```
http-server
```
3. Откройте [http://localhost:8080/](http://localhost:8080/)
